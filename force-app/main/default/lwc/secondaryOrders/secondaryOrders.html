<template>
    <template lwc:if={isSubPartLoad}>
        <div style="margin:40px">
            <c-loading-screen></c-loading-screen>
        </div>
    </template>
    <template lwc:else>
        <div class="orders layouts" id="InvoiceLayout">
            <h3 class="order-title">Generate Invoices</h3>

            <div class="order-head">
                <!-- Customer Info Grid -->
                <div class="slds-m-around_medium customer-info-grid">
                    <div class="slds-grid slds-wrap slds-gutters">
                        <div class="slds-col slds-size_1-of-3">
                            <lightning-input label="Customer Name" value={selectedCustomerName} disabled
                                variant="label-stacked">
                            </lightning-input>
                        </div>
                        <div class="slds-col slds-size_1-of-3">
                            <lightning-input label="Invoice Date" value={invoiceDate} type="date" disabled
                                variant="label-stacked">
                            </lightning-input>
                        </div>
                        <div class="slds-col slds-size_1-of-3">
                            <lightning-textarea label="Remarks" value={remarks} placeholder="Enter remarks"
                                onchange={onUpdateRemakrs} variant="label-stacked">
                            </lightning-textarea>
                        </div>
                    </div>
                </div>

                <div class="order-filters">
                    <button class="actionButton" onclick={handleSave}>Save</button>
                    <button class="actionButton1" onclick={handleCancel}>Cancel</button>
                </div>
            </div>

            <!-- Invoice Items Grid -->
            <div class="invoice-grid-container">
                <template if:true={invoiceItems}>
                    <div class="invoice-grid">
                        <!-- Grid Header -->
                        <div class="grid-header">
                            <div class="grid-cell">S.No.</div>
                            <div class="grid-cell">SKU Name</div>
                            <div class="grid-cell">Available Qty</div>
                            <div class="grid-cell">Invoice Qty</div>
                            <div class="grid-cell">Unit Price</div>
                            <div class="grid-cell">Tax %</div>
                            <div class="grid-cell">Tax Amount</div>
                            <div class="grid-cell">Total Amount</div>
                        </div>

                        <!-- Grid Rows -->
                        <template for:each={invoiceItems} for:item="item">
                            <div key={item.OrderItemId} class="grid-row">
                                <div class="grid-cell">
                                    {item.rowIndex}
                                </div>
                                <div class="grid-cell">
                                    <lightning-input value={item.ProductName} disabled variant="label-hidden">
                                    </lightning-input>
                                </div>
                                <div class="grid-cell">
                                    <lightning-input type="number" value={item.availableQuantity}
                                        data-id={item.OrderItemId} variant="label-hidden" disabled>
                                    </lightning-input>
                                </div>
                                <div class="grid-cell">
                                    <lightning-input type="number" value={item.Quantity} data-id={item.OrderItemId}
                                        onchange={handleQuantityChange} variant="label-hidden">
                                    </lightning-input>
                                </div>
                                <div class="grid-cell">
                                    <lightning-input value={item.UnitPrice} disabled variant="label-hidden">
                                    </lightning-input>
                                </div>
                                <div class="grid-cell">
                                    <lightning-input value={item.TaxPercent} disabled variant="label-hidden">
                                    </lightning-input>
                                </div>
                                <div class="grid-cell">
                                    <lightning-input value={item.TaxAmount} disabled variant="label-hidden">
                                    </lightning-input>
                                </div>
                                <div class="grid-cell">
                                    <lightning-input value={item.TotalAmount} disabled variant="label-hidden">
                                    </lightning-input>
                                </div>
                            </div>
                        </template>
                    </div>
                </template>

                <template if:false={invoiceItems}>
                    <div class="slds-align_absolute-center slds-text-color_error slds-m-top_medium">
                        No items available to invoice.
                    </div>
                </template>
            </div>
        </div>
    </template>
    <c-custom-toast auto-close-time="8000"></c-custom-toast>
</template>